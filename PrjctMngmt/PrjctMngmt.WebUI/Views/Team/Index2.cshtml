@model IEnumerable<PrjctMngmt.Models.Team>

@{
    ViewBag.Title = "Index";
}

	<style>
	.sortable li { margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em; width: 120px; }
	</style>

	<script type="text/javascript">
	    $(function () {
	        $(".sortable").sortable().disableSelection();

	        var $tabs = $("#tabs").tabs();

	        var $tab_items = $("ul:first li", $tabs).droppable({
	            accept: ".connectedSortable li",
	            hoverClass: "ui-state-hover",
	            drop: function (event, ui) {
	                var $item = $(this);
	                var $list = $($item.find("a").attr("href"))
					.find(".connectedSortable");

	                ui.draggable.hide("slow", function () {
	                    $tabs.tabs("select", $tab_items.index($item));
	                    $(this).appendTo($list).show("slow");
	                });
	            }
	        });
	    });

	    $(document).ready(function () {

	        $("#TeamName").change(function () {


	            $.get('/Team/DevelopersByTeam/' + $(this).val(), function (response) {

	                var products = $.evalJSON(response);
	                var ddlSelectedProduct = $("#SelectedProduct");

	                // clear all previous options 
	                $("#SelectedProduct > option").remove();

	                // populate the products 

	                for (i = 0; i < products.length; i++) {

	                    ddlSelectedProduct.append($("<option />").val(products[i].Value).text(products[i].Text));
	                }


	            });


	        });

	    });
	</script>

<h2>Index</h2>

<div id="tabs">
	<ul>
    @foreach (var item in Model)
    {
        <li><a href="#@item.TeamName">@item.TeamName</a></li>
    }
	</ul>
    @foreach (var item in Model)
    {
	<div id="@item.TeamName">
		<ul class="connectedSortable ui-helper-reset sortable">
        @foreach (var dev in (List<PrjctMngmt.Models.Developer>)ViewData["Developers"])
        {
            <li class="ui-state-default">@dev.FirstName</li>
        }
		</ul>
	</div>
    }
</div>

<p>
    @Html.ActionLink("Create New", "Create")
</p>